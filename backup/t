// Generated by CoffeeScript 1.4.0
(function() {
  var cloudfiles, crypto, cs, dateformat, decStream, encStream, encryptionPassword, fs, gunzip, gzip, id, inp, out, out2, outfile, sourceFile, zlib;

  cloudfiles = require('cloudfiles');

  fs = require('fs');

  dateformat = require('dateformat');

  crypto = require('crypto');

  zlib = require('zlib');

  cs = require('cipherstream');

  sourceFile = process.argv[2];

  if (sourceFile == null) {
    process.exit(1);
  }

  outfile = "" + sourceFile + ".encrypted";

  encryptionPassword = "password";

  gzip = zlib.createGzip();

  inp = fs.createReadStream(sourceFile);

  out = fs.createWriteStream(outfile);

  encStream = new cs.CipherStream(encryptionPassword);

  inp.pipe(gzip).pipe(out);

  gunzip = zlib.createGunzip();

  id = fs.createReadStream(outfile);

  out2 = fs.createWriteStream("" + sourceFile + ".original");

  decStream = new cs.DecipherStream(encryptionPassword);

  id.pipe(gunzip).pipe(out2);

}).call(this);
